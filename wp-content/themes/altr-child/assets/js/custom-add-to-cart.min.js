let addToCartButtons=null,miniCartQty=null,miniCartSubtotal=null,miniCartTitleQty=null,miniCartTitleQtyValue=null,decrementButton=null,incrementButton=null,quantityInput=null;const Toast=Swal.mixin({toast:!0,position:"bottom-right",iconColor:"white",customClass:{popup:"colored-toast"},showConfirmButton:!0,timer:3500,timerProgressBar:!0,confirmButtonText:"Ver carrito",confirmButtonColor:"#197900"}),addToCartButtonObserver=new MutationObserver((async t=>{for(const e of t)if("attributes"===e.type){const t=e.target,o=t.getAttribute("aria-label");let n="";if(o&&(n=o.split("“")[1].split("”")[0]),t.classList.contains("added")){const e=t.dataset.product_id,o=await fetch(`https://liligrow.es/wp-json/wc/store/v1/products/${e}`,{method:"GET"});if(200===o.status&&o.ok){const e=document.querySelector(".header-right"),o=e.querySelector(".top-header-cart #mini-cart-products-qty"),r=parseInt(o.textContent),i=e.querySelector(".mini-cart-contents .count"),a=parseInt(i.textContent),u=e.querySelector(".mini-cart-contents .amount-cart bdi"),l=parseFloat(parseFloat(u.textContent.split("€").join("").replace(",",".")).toFixed(2)),c=t.parentNode.querySelector(".price >:not(del) bdi");let s=null,d=1;if(c)s=parseFloat(c.textContent.split("€")[0].split(",").join("."));else{if(window.location.pathname.includes("producto")){quantityInput=document.querySelector("#product-qty-container input[type=number]"),d=parseInt(quantityInput.getAttribute("value"));const t=parseFloat(quantityInput.getAttribute("data-product_price")).toFixed(2);s=parseFloat(parseFloat(t)*d).toFixed(2),console.log({newQuantity:d,productPrice:t,productSalePrice:s,miniCartContentAmountPrice:l})}}o.innerText=r+d,i.innerText=a+d,u.innerText=`${parseFloat(parseFloat(s)+l).toFixed(2).replace(".",",")}€`,quantityInput.setAttribute("value",1),quantityInput.value=1;const{isConfirmed:p}=await Toast.fire({icon:"success",title:`El producto ${n} ha sido añadido a tu carrito`});p&&(window.location="https://liligrow.es/cart")}addToCartButtonObserver.disconnect();break}}loopButtons()}));function loopButtons(){addToCartButtons=document.querySelectorAll("a[class*=ajax_add_to_cart]"),miniCartQty=document.querySelector(".mini-cart-contents .count"),miniCartSubtotal=document.querySelector(".mini-cart-contents .amount-cart bdi"),miniCartTitleQty=document.querySelector(".header-right #mini-cart-products-qty"),quantityInput=document.querySelector("input[type=number]"),miniCartTitleQtyValue=parseInt(miniCartTitleQty.textContent),addToCartButtons.forEach((t=>{t.addEventListener("click",(function(e){e.preventDefault(),addToCartButtonObserver.observe(t,{attributes:!0,attributeFilter:["class"]})}))}))}loopButtons();